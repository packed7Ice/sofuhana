<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>花札「こいこい」</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div id="fit">
    <div id="app">
      <!-- タイトル -->
      <div id="title-screen" class="screen">
        <h1 class="game-title">花札「こいこい」</h1>
        <button id="start-game-button" class="action-button">ゲームスタート</button>
        <button id="help-button" class="action-button">ヘルプ</button>
        <p class="credits">©Yorikawa Aise</p>
      </div>

      <!-- 回戦選択 -->
      <div id="rounds-screen" class="screen">
        <h2 class="scene-title">回戦数を選んでください</h2>
        <div class="round-buttons-container">
          <button class="round-button action-button" data-rounds="3">3回戦</button>
          <button class="round-button action-button" data-rounds="6">6回戦</button>
          <button class="round-button action-button" data-rounds="12">12回戦</button>
        </div>
      </div>

      <!-- ゲーム -->
      <div id="game-screen" class="screen">
        <!-- HUD（上部バー） -->
        <div id="hud">
          <div id="game-info">
            <span id="current-round" class="game-stat">第1回戦</span> |
            あなたの点数: <span id="player-score" class="game-stat">0</span>点 |
            相手の点数: <span id="cpu-score" class="game-stat">0</span>点
          </div>
          <button id="help-button-game" class="action-button">ヘルプ</button>
        </div>

        <!-- ツールチップ（JSがbody直下にも生成するが、初期描画用） -->
        <div id="card-info-box" style="display:none;">
          <p id="card-info-month"></p>
          <p id="card-info-name"></p>
          <p id="card-info-type"></p>
        </div>

        <div class="game-container-inner">
          <div class="main-game-area">
            <div class="hand-area player-cpu-area">
              <h2 class="area-title">相手の手札</h2>
              <div id="cpu-hand-area" class="hand"></div>
            </div>

            <div id="board-area" class="board"></div>

            <div class="player-controls-container">
              <div class="hand-area player-area">
                <h2 class="area-title">あなたの手札</h2>
                <div id="player-hand-area" class="hand"></div>
              </div>
              <div id="action-buttons" class="action-buttons-container">
                <button id="koikoi-button" class="action-button">こいこい</button>
                <button id="shobu-button" class="action-button">勝負</button>
              </div>
            </div>
          </div>

          <div class="captured-container">
            <div class="captured-player">
              <h3 class="area-title">あなたの持ち札</h3>
              <div id="player-captured-area" class="captured-cards-container">
                <div id="player-light-area" class="captured-row"></div>
                <div id="player-tane-area" class="captured-row"></div>
                <div id="player-tan-area" class="captured-row"></div>
                <div id="player-kasu-area" class="captured-row"></div>
              </div>
            </div>
            <div class="captured-cpu">
              <h3 class="area-title">相手の持ち札</h3>
              <div id="cpu-captured-area" class="captured-cards-container">
                <div id="cpu-light-area" class="captured-row"></div>
                <div id="cpu-tane-area" class="captured-row"></div>
                <div id="cpu-tan-area" class="captured-row"></div>
                <div id="cpu-kasu-area" class="captured-row"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- リザルト -->
    <div id="result-screen" class="screen">
      <h2 id="result-message" class="scene-title"></h2>
      <div class="result-info">
        <p>最終得点</p>
        <p>あなた: <span id="final-player-score">0</span>点</p>
        <p>相手: <span id="final-cpu-score">0</span>点</p>
      </div>
      <div class="result-actions">
        <button id="restart-button" class="action-button">もう一度プレイ</button>
        <button id="return-to-title-button" class="action-button">タイトルに戻る</button>
      </div>
    </div>
  </div>

  <!-- ヘルプモーダル -->
  <div id="help-modal" role="dialog" aria-modal="true" aria-labelledby="help-title">
    <div class="modal-content">
      <h2 id="help-title">ヘルプ：花札「こいこい」</h2>

      <h3>基本の流れ</h3>
      <ol>
        <li>場札8枚、自分と相手に各8枚配り、残りは山札。</li>
        <li>自分の番：手札1枚を出す。同じ「月」の場札があれば取り、なければ場に残す。</li>
        <li>続けて山札1枚をめくり、同じ月があれば取り、なければ場に置く。</li>
        <li>役ができたら「勝負」か、続けて狙う「こいこい」を選ぶ。</li>
        <li>どちらも手札が0になったら<strong>流れ</strong>（点数なし）。次の先手は据え置き。</li>
      </ol>

      <h3>役一覧（代表例）</h3>
      <div class="yaku-grid">
        <div>五光（光5枚）</div><div>15</div>
        <div>四光（雨なし）</div><div>8</div>
        <div>雨四光（雨光を含む四光）</div><div>7</div>
        <div>三光（雨光を除く光3枚）</div><div>5</div>
        <div>猪鹿蝶（萩に猪・紅葉に鹿・牡丹に蝶）</div><div>5</div>
        <div>赤短（松 梅 桜の短冊3枚）</div><div>5</div>
        <div>青短（牡丹 菊 紅葉の短冊3枚）</div><div>5</div>
        <div>月見で一杯（芒に月＋菊に杯）</div><div>5</div>
        <div>花見で一杯（桜に幕＋菊に杯）</div><div>5</div>
        <div>タネ（タネ札5枚〜、以降+1/枚）</div><div>1+</div>
        <div>短冊（短冊5枚〜、以降+1/枚）</div><div>1+</div>
        <div>カス（カス10枚〜、以降+1/枚）<br><small>※「菊に杯」はカスにも数えることができます</small></div><div>1+</div>
      </div>

      <p class="help-note">
        ※ 詳細は
        <a href="https://www.nintendo.com/jp/others/hanafuda_kabufuda/howtoplay/koikoi/index.html" target="_blank" rel="noopener noreferrer">
        こいこい｜花札の歴史・遊びかた｜花札・株札｜任天堂
        </a>
        を参照してください。バリエーションにより点数・細則が異なる場合があります。
      </p>

      <button id="help-close" class="action-button">閉じる</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
